# needed by pivot_root
mount --bind $1 $1
# enter root filesystem
cd $1
# old root will be mounted by pivot_root
mkdir -p oldroot
# set new root
pivot_root . oldroot
# set PATH
PATH=/bin:/usr/bin:/sbin:/usr/sbin
# mount /proc
mount -t proc proc /proc
# unmount oldroot, so it can be removed 
umount -l oldroot
# remove oldroot
rmdir oldroot
# Run the indended process using same process id
exec "${@:2}"